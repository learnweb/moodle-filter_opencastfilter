{"version":3,"sources":["../src/form.js"],"names":["define","$","init","submit","e","preventDefault","ocurl","decodeURIComponent","attr","ajax","url","crossDomain","type","xhrFields","withCredentials","data","serialize","complete","each"],"mappings":"AAuBAA,OAAM,wBAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CA4B3B,MA1BQ,CAIJC,IAAI,CAAE,eAAW,CACbD,CAAC,CAAC,gBAAD,CAAD,CAAoBE,MAApB,CAA2B,SAASC,CAAT,CAAY,CACnCA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,CAAK,CAAGC,kBAAkB,CAACN,CAAC,CAAC,IAAD,CAAD,CAAQO,IAAR,CAAa,QAAb,CAAD,CAA9B,CAEAP,CAAC,CAACQ,IAAF,CAAO,CACHC,GAAG,CAAEJ,CADF,CAEHK,WAAW,GAFR,CAGHC,IAAI,CAAE,MAHH,CAIHC,SAAS,CAAE,CAACC,eAAe,GAAhB,CAJR,CAKHC,IAAI,CAAEd,CAAC,CAAC,gBAAD,CAAD,CAAoBe,SAApB,EALH,CAMHC,QAAQ,CAAE,mBAAY,CAClBhB,CAAC,CAAC,WAAD,CAAD,CAAeiB,IAAf,CAAoB,UAAY,CAE5BjB,CAAC,CAAC,IAAD,CAAD,CAAQO,IAAR,CAAa,KAAb,CAAoBP,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,UAAb,CAApB,CACH,CAHD,CAIH,CAXE,CAAP,CAaH,CAjBD,EAkBAd,CAAC,CAAC,gBAAD,CAAD,CAAoBE,MAApB,EACH,CAxBG,CA2BX,CA7BK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Ajax functions for opencast\n *\n * @module     filter/opencast\n * @package    filter_opencast\n * @copyright  2018 Tamara Gunkel\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'], function($) {\n\n    var t = {\n        /*\n         * Submits lti form and updates the source attribute of the video iframes\n         */\n        init: function() {\n            $('#ltiLaunchForm').submit(function(e) {\n                e.preventDefault();\n                var ocurl = decodeURIComponent($(this).attr(\"action\"));\n\n                $.ajax({\n                    url: ocurl,\n                    crossDomain: true,\n                    type: 'post',\n                    xhrFields: {withCredentials: true},\n                    data: $('#ltiLaunchForm').serialize(),\n                    complete: function () {\n                        $(\".ocplayer\").each(function () {\n                            // Replace the src url of the iframes to load the videos.\n                            $(this).attr('src', $(this).data('framesrc'));\n                        });\n                    }\n                });\n            });\n            $('#ltiLaunchForm').submit();\n        }\n    };\n    return t;\n});\n"],"file":"form.min.js"}